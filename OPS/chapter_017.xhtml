<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
<head>
	<title>ПРОГРАММИРОВАНИЕ - ВВЕДЕНИЕ В ПРОФЕССИЮ I: АЗЫ ПРОГРАММИРОВАНИЯ</title>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="css/stylesheet.css" type="text/css" />
</head>
<body>
<section class="body-rw Chapter-rw" epub:type="bodymatter chapter">
<header>
	<h4>1.4.10. Редакторы текстов</h4>
</header>

<p>Различных редакторов текстов в операционных системах семейства Unix существует несколько сотен. Ниже приводятся основные сведения о трёх из них.</p>

<p>Выбирая для работы редактор текстов, следует обратить внимание на то, подходит ли он для написания программ. Для этого редактор текстов должен, во-первых, работать с файлами в обычном текстовом формате; во-вторых, редактор не должен выполнять автоматического форматирования абзацев текста (например, MSWord для этой цели непригоден); и, в-третьих, редактор обязан использовать моноширинный шрифт, то есть шрифт, в котором все символы имеют одинаковую ширину. Выяснить, удовлетворяет ли редактор этому свойству, проще всего, набрав в этом редакторе строку из десяти латинских букв m и под ней&#160;&#8212; строку из десяти латинских букв i. В редакторе, использующем моноширинный шрифт, полученный текст будет выглядеть так:</p>

<br/>
<p class="codecite">
&#160;&#160;&#160;&#160;mmmmmmmmmm<br/>
&#160;&#160;&#160;&#160;&#160;i&#160;&#160;i&#160;&#160;i&#160;&#160;i&#160;&#160;i&#160;&#160;i&#160;&#160;i&#160;&#160;i&#160;&#160;i&#160;&#160;i&#160;<br/>
</p>
<br/>

<p>тогда как в редакторе, использующем пропорциональный шрифт (и непригодном, вследствие этого, для программирования), вид будет примерно таков:</p>

<br/>
<p class="codecite">
&#160;&#160;&#160;&#160;mmmmmmmmmm<br/>
&#160;&#160;&#160;&#160;iiiiiiiiii<br/>
</p>
<br/>

<h5>Редактор vim</h5>

<p>Редактор vim (Vi Improved) является клоном классического редактора текстов для Unix-подобных операционных систем VI. Работа в редакторах этого семейства может показаться начинающему пользователю несколько неудобной, т. к. по построению интерфейса они коренным образом отличается от привычных большинству пользователей экранных редакторов текстов с системами меню. В то же время многие программисты, работающие под Unix-системами, предпочитают использовать именно эти редакторы, поскольку для человека, умеющего использовать основные функции этих редакторов, именно этот вариант интерфейса оказывается наиболее удобным для работы над текстом программы. Больше того, как показывает опыт автора этих строк, всё это относится не только к программам; текст книги, которую вы читаете, набран в редакторе vim, как и тексты всех остальных книг автора.</p>

<p>В любом случае, если освоение редактора vim покажется вам чрезмерно сложной задачей, к вашим услугам другие редакторы текстов, два из которых описаны ниже. Для читателей, решивших обойтись без изучения vim, приведем для справки последовательность нажатия клавиш для выхода из этого редактора: если вы случайно запустили vim, практически в любой ситуации вы можете нажать Escape, затем набрать :qa!, и это приведёт к выходу из редактора без сохранения изменений.</p>

<br/>
<p class="centered">
	<img src="images/vim_arrows.png" /><br/>
	<small>Рис. 1.6. Перемещение курсора в vim с помощью алфавитных клавиш</small>
</p>
<br/><br/>

<p>Чтобы запустить редактор vim, достаточно дать команду vim myfile.c. Если файла myfile.c не существует, он будет создан при первом сохранении изменений. Первое, что необходимо уяснить, работая с vim&#160;&#8212; это <strong>наличие у него двух режимов работы: режима ввода текста и режима команд</strong>. Сразу после запуска вы оказываетесь в режиме команд. В этом режиме любые нажатия клавиш будут восприняты как команды редактору, т. е. если вы попытаетесь ввести текст, результат такой попытки вам не понравится.</p>

<p>Перемещение по тексту в режиме команд возможно с помощью стрелочных клавиш, однако более опытные пользователи vim предпочитают пользоваться для этой цели символами j, k, h и l для перемещения, соответственно, вниз, вверх, влево и вправо (см. рис. 1.6).</p>

<br/>
<small>
	<p>Причина такого выбора в том, что в ОС UNIX стрелочные клавиши генерируют последовательность байтов, начинающуюся с кода Esc (27); любая такая последовательность может быть воспринята редактором как требование на переход в командный режим и несколько команд-символов, причём единственный способ отличить Esc-последовательность, порождённую нажатием клавиши, от такой же последовательности, введённой пользователем&#160;&#8212; это измерение времени между приходом кода Esc и следующего за ним. При работе на медленной линии связи (например, при удалённом редактировании файла в условиях медленной или неустойчивой работы сети) этот способ может давать неприятные сбои.</p>
</small>
<br/>

<p>Несколько наиболее часто употребляемых команд приведены в табл. 1.3. Команды i, a, o, и O переводят вас в режим ввода текста. Теперь всё вводимое с клавиатуры воспринимается как текст, подлежащий вставке. Естественно, возможно использование клавиши Backspace в её обычной роли. В большинстве случаев возможно также использование стрелочных клавиш, но в некоторых версиях vim, при некоторых особенностях настройки, а также при работе через медленный канал связи возможна неправильная реакция редактора на стрелки. В этом случае для навигации по тексту необходимо выйти из режима ввода. Выход из режима ввода и возврат в режим команд осуществляется нажатием клавиши Escape.</p>

<br/>
<p class="tabledescr">
	<small>Таблица 1.3. Команды редактора vim</small>
</p>
<table width="100%">
	<tr>
		<td class="colw">&#94;</td>
		<td>перейти в начало строки</td>
	</tr>
	<tr>
		<td class="colw">&#36;</td>
		<td>перейти в конец строки</td>
	</tr>
	<tr>
		<td class="colw">x</td>
		<td>удалить символ под курсором</td>
	</tr>
	<tr>
		<td class="colw">dw</td>
		<td>удалить слово (от курсора до пробела или конца строки)</td>
	</tr>
	<tr>
		<td class="colw">dd</td>
		<td>удалить текущую строку</td>
	</tr>
	<tr>
		<td class="colw">d&#36;</td>
		<td>удалить символы от курсора до конца строки</td>
	</tr>
	<tr>
		<td class="colw">J</td>
		<td>слить следующую строку с текущей (удалить перевод строки)</td>
	</tr>
	<tr>
		<td class="colw">i</td>
		<td>начать ввод текста с позиции перед текущим символом (insert)</td>
	</tr>
	<tr>
		<td class="colw">a</td>
		<td>то же, но после текущего символа (append)</td>
	</tr>
	<tr>
		<td class="colw">o</td>
		<td>вставить пустую строку после текущей и начать ввод текста</td>
	</tr>
	<tr>
		<td class="colw">O</td>
		<td>то же, но строка вставляется перед текущей</td>
	</tr>
	<tr>
		<td class="colw">.</td>
		<td>повторить последнюю операцию</td>
	</tr>
	<tr>
		<td class="colw">u</td>
		<td>отменить последнюю операцию (undo)</td>
	</tr>
	<tr>
		<td class="colw">U</td>
		<td>отменить все изменения, внесенные в текущую строку</td>
	</tr>
</table>
<br/><br/>

<p>При необходимости найти в тексте то или иное ключевое слово следует использовать (в командном режиме) последовательность /&#60;word&#62;, завершая её нажатием Enter. Так, /myfun установит курсор на ближайшее вхождение строки myfun в вашем тексте. Повторить поиск можно, введя символ / и сразу же нажав Enter.</p>

<p>Переместиться на строку с заданным номером (например, на строку, для которой компилятор выдал сообщение об ошибке) можно, набрав двоеточие, номер строки и нажав Enter. Также через двоеточие доступны команды сохранения, загрузки файлов, выхода и т. п. (см. табл. 1.4).</p>

<br/>
<p class="tabledescr">
	<small>Таблица 1.4. Файловые команды редактора vim</small>
</p>
<table width="100%">
	<tr>
		<td class="colw">:w</td>
		<td>сохранить редактируемый файл</td>
	</tr>
	<tr>
		<td class="colw">:w &#60;name&#62;</td>
		<td>записать файл под новым именем</td>
	</tr>
	<tr>
		<td class="colw">:w!</td>
		<td>сохранить, игнорируя (по возможности) флаг readonly</td>
	</tr>
	<tr>
		<td class="colw">:wq</td>
		<td>сохранить файл и выйти</td>
	</tr>
	<tr>
		<td class="colw">:q</td>
		<td>выйти из редактора (если файл не был изменён с момента последнего сохранения)</td>
	</tr>
	<tr>
		<td class="colw">:q!</td>
		<td>выйти без сохранения, сбросив сделанные изменения</td>
	</tr>
	<tr>
		<td class="colw">:r &#60;name&#62;</td>
		<td>прочитать содержимое файла &#60;name&#62; и вставить его в редактируемый текст</td>
	</tr>
	<tr>
		<td class="colw">:e &#60;name&#62;</td>
		<td>начать редактирование еще одного файла</td>
	</tr>
	<tr>
		<td class="colw">:ls</td>
		<td>показать список редактируемых файлов (активных буферов)</td>
	</tr>
	<tr>
		<td class="colw">:b &#60;N&#62;</td>
		<td>перейти к буферу номер N</td>
	</tr>
</table>
<br/><br/>

<p>При одновременной работе с несколькими файлами переход между двумя последними редактируемыми файлами, кроме команды :b, также можно осуществить комбинацией клавиш Ctrl-&#94;.</p>

<p>Отдельного упоминания заслуживают команды выделения блоков и работы с блоками. Начать выделение фрагмента, состоящего исключительно из целых строк, можно командой V; выделить фрагмент, состоящий из произвольного количества символов, можно с помощью команды v. Граница выделения устанавливается стрелками или соответствующими командами h, j, k и l.</p>

<p>Удалить выделенный блок можно командой d, скопировать&#160;&#8212; командой y. В обоих случаях выделение снимается, а фрагмент текста, находившийся под выделением, помещается в специальный буфер. Содержимое буфера можно вставить в текст командами p (после курсора) и P (перед курсором). Текст может попасть в буфер и без выделения. Так, все команды, удаляющие те или иные фрагменты текста (x, dd, dw, d&#36; и др.), помещают удалённый текст в буфер. Команды yy, yw, y$ помещают в буфер, соответственно, текущую строку, текущее слово и символы от курсора до конца строки.</p>


<br/>
<h5>Редактор joe</h5>

<p>Другой популярный в среде Unix редактор текстов называется joe от слов Jonathan’s Own Editor. Чтобы запустить его, достаточно дать команду joe myfile.c. Если файла myfile.c не существует, он будет создан при первом сохранении изменений. В отличие от редактора vim, интерфейс редактора joe более похож на привычные для большинства пользователей редакторы текстов. Стрелочные клавиши, Enter, Backspace и другие работают в своей обычной роли, в большинстве случаев также доступна клавиша Delete. Команды редактору даются с помощью комбинаций клавиш, большинство из которых начинается с Ctrl-K. В частности, Ctrl-K h покажет в верхней части экрана памятку по наиболее употребительным командам редактора (см. табл. 1.5).</p>

<br/>
<p class="tabledescr">
	<small>Таблица 1.5. Наиболее употребительные команды редактора joe</small>
</p>
<table width="100%">
	<tr>
		<td class="colw">Ctrl-K D</td>
		<td>сохранить файл</td>
	</tr>
	<tr>
		<td class="colw">Ctrl-K X</td>
		<td>сохранить и выйти</td>
	</tr>
	<tr>
		<td class="colw">Ctrl-C</td>
		<td>выйти без сохранения</td>
	</tr>
	<tr>
		<td class="colw">Ctrl-Y</td>
		<td>удалить текущую строку</td>
	</tr>
	<tr>
		<td class="colw">Ctrl-K B</td>
		<td>отметить начало блока</td>
	</tr>
	<tr>
		<td class="colw">Ctrl-K K</td>
		<td>отметить конец блока</td>
	</tr>
	<tr>
		<td class="colw">Ctrl-K C</td>
		<td>скопировать выделенный блок в новое место</td>
	</tr>
	<tr>
		<td class="colw">Ctrl-K M</td>
		<td>переместить выделенный блок в новое место</td>
	</tr>
	<tr>
		<td class="colw">Ctrl-K Y</td>
		<td>удалить выделенный фрагмент</td>
	</tr>
	<tr>
		<td class="colw">Ctrl-K L</td>
		<td>найти строку по номеру</td>
	</tr>
	<tr>
		<td class="colw">Ctrl-Shift-’-’</td>
		<td>отменить последнее действие (undo)</td>
	</tr>
	<tr>
		<td class="colw">Ctrl-&#94;</td>
		<td>снова выполнить отмененное действие (redo)</td>
	</tr>
	<tr>
		<td class="colw">Ctrl-K F</td>
		<td>поиск ключевого слова</td>
	</tr>
	<tr>
		<td class="colw">Ctrl-L</td>
		<td>повторный поиск</td>
	</tr>
</table>
<br/><br/>


<h5>Встроенный редактор оболочки Midnight Commander</h5>

<p>Оболочка (файловый монитор) Midnight Commander представляет собой клон некогда популярного файлового менеджера под MS-DOS, известного как Norton Commander. Запуск оболочки производится командой mc. Вызов встроенного редактора текстов для редактирования выбранного файла производится клавишей F4; если вы хотите создать новый файл, используйте комбинацию Shift-F4.</p>

<p>Интерфейс этого редактора достаточно понятен на интуитивном уровне, поэтому подробное описание мы опускаем. Ограничимся одной рекомендацией. Если не предпринять специальных мер, редактор будет вставлять в текст символ табуляции вместо групп из восьми пробелов, что может оказаться неудобным при использовании других редакторов. Единственный способ отключить такой стиль заполнения&#160;&#8212; установить опцию &#171;Fill tabs with spaces&#187;. Чтобы добраться до диалога с настройками, нажмите F9, выберите пункт меню &#171;Options&#187;, в нём&#160;&#8212; пункт &#171;General&#187;. Чтобы настройки не потерялись при выходе из Midnight Commander, сохраните их. Для этого, выйдя из редактора, нажмите F9, выберите пункт меню &#171;Options&#187;, а в нём&#160;&#8212; пункт &#171;Save Setup&#187;.</p>

</section>
</body>
</html>