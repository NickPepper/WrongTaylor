<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops">
<head>
	<title>ПРОГРАММИРОВАНИЕ - ВВЕДЕНИЕ В ПРОФЕССИЮ I: АЗЫ ПРОГРАММИРОВАНИЯ</title>
	<meta charset="utf-8" />
	<link rel="stylesheet" href="css/stylesheet.css" type="text/css" />
</head>

<body>
<section class="body-rw Chapter-rw" epub:type="bodymatter chapter">

<header>
	<h3>1.5. Теперь немного математики</h3>
</header>

<p>В этой главе мы рассмотрим очень краткие сведения из области математики, без знания и понимания которых в ходе дальнейшего чтения этой книги (и изучения программирования) у вас совершенно однозначно возникнут проблемы. В основном эти сведения относятся к так называемой <i>дискретной математике</i>, которая совершенно игнорируется в школьной программе по математике, но в последние годы вошла в программу школьной информатики. К сожалению, то, как эти вещи обычно излагаются в школе, не оставляет нам иного выбора, кроме как рассказать их самим.</p>

<header>
	<h4>1.5.1. Элементы комбинаторики</h4>
</header>

<p>Комбинаторикой называется раздел математики, охватывающий задачи вроде &#171;сколькими способами можно...&#187;, &#171;сколько существует различных вариантов...&#187; и прочее в таком духе. В комбинаторике всегда рассматриваются <i>конечные множества</i>, с элементами которых всё время что-то происходит: их переставляют в разном порядке, часть из них отбрасывают, потом возвращают обратно, объединяют в разные группы, сортируют и снова перемешивают и вообще всячески над ними измываются. Мы начнём с одной из самых простых задач комбинаторики, которую, во избежание лишнего занудства, сформулируем языком учебника для младшего школьного возраста.</p>

<p class="centered-italic">Вася и Петя решили поиграть в шпионов. Для этого Вася не поленился прикрутить к окошку своей комнаты три цветные лампочки, которые хорошо видно снаружи, если их зажечь, причём зажигать каждую из лампочек можно независимо от других. Вася прикрутил лампочки на совесть, так что менять их местами нельзя. Сколько разных сигналов может передать Вася Пете с помощью своих лампочек, если вариант &#171;ни одна не горит&#187; тоже рассматривать как сигнал? Вася точно не знает, когда Петя решит посмотреть на его окно, так что всяческие варианты с азбукой Морзе и другими подобными сигнальными системами не подходит: Васе нужно привести лампочки в положение, соответствующее передаваемому сигналу, и в таком виде оставить надолго, чтобы Петя точно успел заметить сигнал.</p>

<p>Многие читатели, возможно, дадут правильный ответ без лишних раздумий: восемь; однако интерес здесь представляет скорее не то, как вычислить ответ (возвести двойку в нужную степень), а то, почему ответ вычисляется именно так. Чтобы выяснить это, мы начнём с тривиального случая: когда лампочка всего одна. Очевидно, что передать здесь можно всего два разных сигнала: один из них будет обозначаться включённой лампочкой, а второй&#160;&#8212; выключенной.</p>

<p>Добавим теперь ещё одну лампочку. Если, например, эта вторая лампочка будет всё время включена, то можно будет, как и прежде, передать всего два сигнала: &#171;первая лампочка включена&#187; и &#171;первая лампочка выключена&#187;. Но никто не мешает вторую лампочку выключить; в этом положении у нас тоже будет два разных сигнала: &#171;первая включена&#187; и &#171;первая выключена&#187;. Однако тот, кому предназначены сигналы, в нашей задаче Петя, может смотреть на <i>обе</i> лампочки, то есть учитывать состояние их обеих. Первые два сигнала (при включённой второй лампочке) будут отличаться для него от вторых двух сигналов (при выключенной второй лампочке). Всего, следовательно, мы получим возможность передачи четырёх различных сигналов: <i>выключена-выключена, выключена-включена, включена-выключена и включена-включена</i>.</p>

<p>Снабдим эти четыре сигнала номерами от 1 до 4 и добавим ещё одну лампочку, третью. Если её включить, то можно будет передать четыре различных сигнала (с помощью включения и выключения первых двух лампочек). Если её выключить, мы получим ещё четыре сигнала, которые будут отличаться от первых четырёх; всего разных сигналов получится восемь. Останавливаться на этом нас никто не заставляет; пронумеровав имеющиеся восемь сигналов числами от 1 до 8 и добавив четвёртую лампочку, мы получим 8&#160;&#43; 8 = 16 сигналов. Рассуждения можно обобщить: если с помощью <i>n</i> лампочек мы можем передать <i>N</i> сигналов, то добавление лампочки с номером <i>n</i>&#160;&#43;1 удваивает количество возможных сигналов (то есть их получается 2<i>N</i>), поскольку первые <i>N</i> у нас получаются с помощью исходно имевшихся лампочек при выключенной новой, а вторые <i>N</i> получается (всё с теми же имевшимися лампочками), если новую включить.</p>

<p>Полезно будет рассмотреть <i>вырожденный</i> случай: ни одной лампочки, то есть <i>n</i> = 0. Конечно, в шпионов так не поиграешь, но случай, тем не менее, с математической точки зрения важный. На вопрос &#171;сколько сигналов можно передать, имея 0 лампочек&#187;, большинство обывателей ответит &#171;нисколько&#187;, но, как ни странно, этот ответ неудачный. В самом деле, наши &#171;сигналы&#187; отличают одну ситуацию от другой, или, точнее, они <i>соответствуют</i> каким-то разным ситуациям. Если говорить ещё точнее, можно заметить, что &#171;ситуаций&#187; на самом деле бесконечно много, просто при передаче сигнала мы игнорируем некоторые факторы, тем самым объединяя множество ситуаций в одну. Например, наш юный шпион Вася мог обозначить сигналом &#171;все лампочки погашены&#187; ситуацию &#171;меня нет дома&#187;; остальные семь комбинаций в сигнализации наших друзей могли бы означать &#171;я делаю уроки&#187;, &#171;я читаю книжку&#187;, &#171;я ем&#187;, &#171;я смотрю телевизор&#187;, &#171;я сплю&#187;, &#171;я занят чем-то ещё&#187; и, наконец, &#171;я ничем не занят, мне вообще нечего делать, так что приходи в гости&#187;. Если внимательно посмотреть на этот список, можно заметить, что в любой из ситуаций возможны дальнейшие уточнения: сигнал &#171;я ем&#187; может одинаково обозначать ситуации &#171;я обедаю&#187;, &#171;я ужинаю&#187;, &#171;я ем вкусный торт&#187;, &#171;я пытаюсь одолеть невкусную и противную перловку&#187; и т. п.; &#171;я делаю уроки&#187; может с равным успехом означать &#171;я решаю задачи по математике&#187;, &#171;я раскрашиваю карты, которые задали по географии&#187; или &#171;я сдуваю упражнения по русскому у соседки Кати&#187;. Возможны варианты &#171;я делаю уроки и хорошо себя чувствую, так что скоро всё сделаю&#187; и &#171;я делаю уроки, но у меня при этом болит живот, так что домашняя работа сегодня затянется&#187;. Каждый из возможных сигналов несколько снижает общую неопределённость, но, разумеется, не устраняет её.</p>

<p>Вернёмся к нашему вырожденному примеру. Не имея ни одной лампочки, мы вообще не можем отличать ситуации друг от друга, но значит ли это, что у нас нет вообще никаких ситуаций? Очевидно, что это не так: наши юные шпионы по-прежнему чем-то заняты или, наоборот, не заняты, просто наш вырожденный вариант сигнализации не позволяет эти ситуации различать. Попросту говоря, мы <i>объединили все возможные ситуации в одну</i>, полностью убрав какую-либо определённость; но ведь мы объединили их в <i>одну</i> ситуацию, а не в <i>ноль</i> таковых.</p>

<p>Теперь уже всё становится на свои места: при нуле лампочек у нас один возможный сигнал, а добавление каждой новой лампочки увеличивает количество сигналов вдвое, так что <i>N</i> = 2<sup><i>n</i></sup>, где <i>n</i>&#160;&#8212; количество лампочек, а <i>N</i>&#160;&#8212; количество возможных сигналов. Попутно отметим, что иногда приведённые рассуждения позволяют лучше понять, почему считается, что 
<!-- <div role="math" aria-label=""> -->
   	<m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
   		<m:mrow>
	    	<m:msup>
	            <m:mi>k</m:mi>
	            <m:mn>0</m:mn>
	        </m:msup>
	        <m:mtext>&#160;</m:mtext>
	        <m:mfrac>
		       	<m:mi><small>Df</small></m:mi>
	        	<m:mn>&#95;&#95;&#95;</m:mn>
	    	</m:mfrac>
	    	<m:mtext>&#160;1</m:mtext>
    	</m:mrow>
   	</m:math>
<!-- </div> -->
для любого k&#160;&#62; 0.</p>

<p>Задача про количество сигналов, передаваемых с помощью <i>n</i> лампочек, каждая из которых может гореть или не гореть, эквивалентна многим другим задачам; прежде чем мы перейдём к сухой математической сути, приведём ещё одну формулировку:</p>

<p class="centered-italic">У Маши есть брошка, цепочка, серёжки, колечко и браслет. Каждый раз, выходя из дома, Маша долго раздумывает, какие из украшений в этот раз надеть, а какие оставить дома. Сколько у неё есть вариантов выбора?</p>

<p>Чтобы понять, что это <i>та же самая задача</i>, давайте введём произвольное допущение, не относящееся к сути задачи и никак эту суть не затрагивающее: пусть наш юный шпион Вася из предыдущей задачи оказался младшим братом Маши и решил от нечего делать сообщать своему приятелю Пете, какие из украшений его сестра нацепила в этот раз. Для этого ему придётся добавить к трём уже имеющимся ещё две лампочки, чтобы их стало столько же, сколько у Маши украшений. Первая лампочка из пяти будет обозначать, надела ли Маша брошку, вторая&#160;&#8212; надела ли Маша цепочку, и так далее, по одной лампочке на каждое украшение из имеющихся у Маши. Мы уже знаем, что количество сигналов, передаваемых пятью лампочками, равно 
<m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
	<m:mrow>
		<m:msup>
        	<m:mi>2</m:mi>
        	<m:mn>5</m:mn>
    	</m:msup>
    	<m:mtext>&#160;= 32</m:mtext>
	</m:mrow>
</m:math>; очевидно, что это количество в точности равно количеству комбинаций из украшений, которые надела Маша.</p>

<p>На &#171;высушенном&#187; математическом языке та же самая задача, полностью лишённая &#171;шелухи&#187;, не влияющей на результат, и сведённая к чистым абстракциям, существенным с точки зрения решения, формулируется так:</p>

<p class="centered-italic">Дано множество из n элементов. Сколько существует различных подмножеств этого множества?</p>

<p>Ответ 2<sup><i>n</i></sup> несложно запомнить, и, к сожалению, в школе обычно именно так и делают; результатом такого &#171;дешёвого и сердитого&#187; подхода к изучению математики становится лёгкость, с которой ученика можно совершенно запутать сколько-нибудь нестандартными формулировками условий задачи. Вот вам пример:</p>

<p class="centered-italic">У Димы есть четыре разноцветных кубика. Ставя их один на другой, Дима строит &#171;башни&#187;, причём один кубик, на котором ничего не стоит, Дима тоже считает &#171;башней&#187;; иначе говоря, башня у Димы имеет высоту от 1 до 4 кубиков. Сколько различных &#171;башен&#187; можно построить из имеющихся кубиков, по одной за раз?</p>

<p>Кабы вы только знали, уважаемый читатель, сколько старшеклассников, совершенно не задумываясь, выдают на эту задачу ответ 2<sup>4</sup>! Между прочим, некоторые из них, заметив, что пустая башня условиями задачи исключена, &#171;совершенствуют&#187; свой ответ, вычтя &#171;запрещённый&#187; вариант, и получают 2<sup>4</sup>&#160;&#8722; 1. Правильнее он от этого не становится ни на йоту, потому что это попросту <i>совершенно не та задача</i>, в которой двойку возводят в степень <i>n</i>; но чтобы это понять, необходимо для начала понимать, <i>почему</i> двойку возводят в степень <i>n</i> в &#171;той&#187; задаче, а вот с этим у школьников, зазубривших &#171;магическое&#187; 2<sup><i>n</i></sup>, обнаруживаются фатальные проблемы.</p>

<p>Кстати, правильный ответ этой задачи&#160;&#8212; 64, но решение не имеет ничего общего с возведением двойки в шестую степень; если бы кубиков было три, ответ был бы 15, а для пяти кубиков правильный ответ будет 325. Всё дело тут, разумеется, в том, что в этой задаче важно не только <i>из каких кубиков состоит башня</i>, но и <i>в каком порядке</i> расположены кубики, составляющие башню. Поскольку для башен, состоящих более чем из одного кубика, можно получать разные варианты, просто меняя кубики местами, итоговых комбинаций оказывается гораздо больше, чем если бы мы рассматривали возможные наборы кубиков без учёта их порядка.</p>

<p>Прежде чем перейти к рассмотрению задач, в которых существенны перестановки, рассмотрим ещё пару задач на количество вариантов без перестановок элементов. Первую из них мы &#171;состряпаем&#187; из исходной задачи про юных шпионов:</p>

<p class="centered-italic">Папа принёс Васе дешёвый китайский светильник, который может либо быть выключен, либо просто светиться, либо мигать. Вася немедленно прикрутил светильник к своему окну, где уже есть три обычные лампочки. Сколько разных сигналов Вася может передать Пете теперь, после усовершенствования своего шпионского оборудования?</p>

<p>Задача, конечно, совершенно элементарная, но она представляет интерес вот в каком плане. Если человек понимает, <i>как</i> (и <i>почему именно так</i>) решается задача с тремя обыкновенными лампочками, то никаких проблем с &#171;заковыристой&#187; лампочкой, имеющей три разных состояния, у него не возникнет; но если задачу пытается решать среднестатистический школьник, которому на уроке вдолбили формулу <i>N</i>&#160;&#61; 2<sup><i>n</i></sup>, не объяснив, откуда она взялась, то с хорошей степенью достоверности на этой новой задаче он &#171;сядет&#187;. А ведь решается она ничуть не сложнее, чем предыдущая, причём ровно теми же рассуждениями: мы можем передать восемь разных сигналов, если китайский светильник погашен; столько же мы можем передать, если он включён; и ещё столько же&#160;&#8212; если он мигает. Итого 8&#160;&#43; 8&#160;&#43; 8&#160;&#61; 3&#160;&#x22C5; 8&#160;&#61; 24. Этот случай показывает, насколько <i>схема вывода формулы</i> ценнее самой формулы, и сейчас самое время отметить, что в комбинаторике <i>всегда так</i>; больше того, комбинаторные формулы попросту <i>вредно</i> помнить, их лучше каждый раз выводить, благо все они настолько простые, что вывести их можно в уме. Запомнив любую формулу из области комбинаторики, вы рискуете применить её не по делу, как это делают вышеупомянутые школьники, пытаясь решать задачу про башни из кубиков.</p>

<p>Ещё одна задача на ту же тему выглядит так:</p>

<p class="centered-italic">У Оли есть заготовки для флажков в форме обыкновенного прямоугольника, треугольника и прямоугольника с вырезом; ещё у Оли есть нашивки другого цвета в форме кружочка, квадратика, треугольничка и звёздочки. Оля решила сделать много флажков для праздника; сколько различных флажков она может сделать, пришивая к одной из имеющихся заготовок одну из имеющихся нашивок?</p>

<p>Эта задача тоже, можно сказать, стандартно-хрестоматийная, так что большинство людей, хотя бы приблизительно знающих, о чём идёт речь, просто перемножат два числа и получат совершенно правильный ответ&#160;&#8212; 12. Но гораздо интереснее здесь не то, как решить конкретную задачу, а то, какими вообще путями можно это сделать. Для начала отметим, что наше рассуждение с лампочками замечательно проходит и здесь: в самом деле, если бы у Оли были только заготовки прямоугольной формы, то она смогла бы сделать столько разных флажков, сколько у неё есть разных нашивок, то есть четыре. Если бы у неё были только заготовки треугольной формы, она бы тоже смогла сделать четыре разных флажка, и то же самое&#160;&#8212; если бы все её заготовки имели форму прямоугольника с вырезом. Но ведь первые четыре варианта отличаются от вторых четырёх вариантов, а третьи четыре варианта отличаются и от первых, и от вторых&#160;&#8212; формой заготовки; следовательно, всего вариантов 3&#160;&#x22C5; 4 = 12.</p>

<p>Однако больший интерес может представлять другой вариант рассуждений. Составим таблицу, в которой будет три столбца по числу разных заготовок и четыре строки по числу разных нашивок. В каждом столбце расположим флажки, сделанные с использованием соответствующей заготовки, а в каждой строке&#160;&#8212; флажки, сделанные с использованием соответствующей нашивки (см. рис. 1.7). Для каждого, у кого в мозгах сформирована абстракция умножения, немедленно становится очевидно, что клеток с флажками получилось 3&#160;&#x22C5; 4 = 12; интересно, что это понимание сродни понятию площади прямоугольника, только для дискретного случая.</p>

<p class="centered">
	<img src="images/combinator_flags.jpg" /><br/>
	<small>Рис. 1.7. Задача о флажках</small>
</p>
<br/><br/>

<p>Наконец, рассмотрим ещё одну задачу, похожую на ту, решение которой мы оставили на потом:</p>

<p class="centered-italic">У Димы есть ящик с кубиками четырёх разных цветов. Ставя кубики один на другой, Дима строит &#171;башни&#187;, причём один кубик, на котором ничего не стоит, Дима тоже считает &#171;башней&#187;; иначе говоря, башня у Димы имеет высоту от 1 до 4 кубиков. Сколько различных &#171;башен&#187; можно построить из имеющихся кубиков? Считается, что кубиков каждого цвета у Димы имеется сколько угодно.</p>

<p>Несмотря на кажущуюся схожесть (здесь совпадают примерно три четверти текста), эта задача гораздо проще своей предыдущей версии, где кубиков было всего четыре. Впрочем, опять-таки, если не понимать, <i>как</i> получаются комбинаторные результаты, эту задачу решить невозможно, поскольку стандартные формулы для неё не срабатывают. Правильный ответ здесь&#160;&#8212; 340; предлагаем читателю самостоятельно продемонстрировать, как этот ответ получился.</p>

<br/><br/>

<p>Пока все задачи, которые мы рассматривали, решались без учёта перестановок; единственную задачу, в которой перестановки оказались существенны, мы решать не стали. Разговор о задачах с перестановками мы начнём, собственно говоря, с <i>канонической задачи о количестве возможных перестановок</i>. Как обычно, для начала сформулируем её по-школьному:</p>

<p class="centered-italic">У Коли в мешке лежат семь шариков для американского бильярда с разными номерами (например, &#171;сплошные&#187; от единички до семёрки). Сколькими разными способами Коля может поставить их на полке в ряд?</p>

<p>Прийти к правильному ответу можно двумя способами, и мы рассмотрим их оба. Начнём с тривиального варианта: есть всего один шарик, сколькими &#171;способами&#187; можно поставить его на полку? Очевидно, что способ тут только один. Возьмём теперь два шарика; в принципе, неважно, какие у них номера, результат от этого не меняется, но пусть для определённости это будут шарики с номерами 2 и 6. Очевидно, есть два способа расставить их на полке: &#171;двойка слева, шестёрка справа&#187; и &#171;шестёрка слева, двойка справа&#187;. Первый способ назовём прямым, второй&#160;&#8212; обратным, поскольку номера шаров слева направо в этом случае не возрастают, а, наоборот, убывают.</p>

<p>Добавим теперь третий шарик (например, пусть это будет номер 3) и посмотрим, сколько стало способов. Крайний левый шарик мы можем выбрать тремя способами: поставить слева двойку, поставить слева тройку или поставить слева шестёрку. Какой бы шарик мы ни выбрали, оставшиеся два шарика на оставшиеся две позиции можно поставить двумя уже известными нам способами&#160;&#8212; прямым и обратным; иначе говоря, на каждый вариант выбора крайнего левого шарика имеются два варианта расстановки остальных, то есть всего вариантов будет шесть (рис. 1.8). Отметим, что обычно перестановки нумеруют именно в таком порядке: сначала их сортируют по возрастанию первого элемента (то есть сначала идут перестановки, в которых первый элемент имеет наименьший номер, а в конце&#160;&#8212; перестановки, где номер первого элемента наибольший), затем все перестановки, имеющие одинаковый первый элемент, сортируют по возрастанию второго, и так далее.</p>

<p>Если теперь добавить <i>четвёртый</i> шарик (пусть это будет шар с номером 5), мы получим <i>четыре</i> способа выбора крайнего левого из них, и при каждом таком способе остальные шарики можно будет расставить уже известными нам шестью способами; всего перестановок для четырёх шариков получится, соответственно, 24. Теперь мы, можно надеяться, готовы к обобщению: если для <i>k</i>&#160;&#x2212; 1 шаров существует 
<m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
	<m:mrow>
		<m:msub>
        	<m:mi>M</m:mi>
        	<m:mn>k&#160;&#x2212; 1</m:mn>
    	</m:msub>
	</m:mrow>
</m:math> возможных перестановок, то, добавляя <i>k</i>-й шар, мы количество перестановок увеличим в <i>k</i> раз, то есть <m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
	<m:mrow>
		<m:msub>
        	<m:mi>M</m:mi>
        	<m:mn>k</m:mn>
    	</m:msub>
	</m:mrow>
</m:math> = <i>k</i>&#160;&#x22C5; <m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
	<m:mrow>
		<m:msub>
        	<m:mi>M</m:mi>
        	<m:mn>k&#160;&#x2212; 1</m:mn>
    	</m:msub>
	</m:mrow>
</m:math>. В самом деле, при добавлении <i>k</i>-го шара всего шаров становится как раз <i>k</i>, то есть самый первый (например, крайний левый) шар мы можем выбрать <i>k</i> способами, а остальные, согласно сделанному предположению, можно расставить (при фиксированном крайнем левом) <m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
	<m:mrow>
		<m:msub>
        	<m:mi>M</m:mi>
        	<m:mn>k&#160;&#x2212; 1</m:mn>
    	</m:msub>
	</m:mrow>
</m:math> способами. Поскольку начали мы с того, что для <i>одного</i> шара существует <i>одна</i> возможная перестановка, то есть <m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
	<m:mrow>
		<m:msub>
        	<m:mi>M</m:mi>
        	<m:mn>1</m:mn>
    	</m:msub>
	</m:mrow>
</m:math> = 1, общее число перестановок для <i>k</i> шаров получится равным <i>произведению всех натуральных чисел от 1 до k</i>:</p>

<p class="centered-italic"><m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
	<m:mrow>
		<m:msub>
        	<m:mi>M</m:mi>
        	<m:mn>k</m:mn>
    	</m:msub>
	</m:mrow>
</m:math> = k&#160;&#x22C5; <m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
	<m:mrow>
		<m:msub>
        	<m:mi>M</m:mi>
        	<m:mn>k&#160;&#x2212; 1</m:mn>
    	</m:msub>
	</m:mrow>
</m:math> = k&#160;&#x22C5; (k&#160;&#x2212; 1)&#160;&#x22C5; <m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
	<m:mrow>
		<m:msub>
        	<m:mi>M</m:mi>
        	<m:mn>k&#160;&#x2212; 2</m:mn>
    	</m:msub>
	</m:mrow>
</m:math> = ... = k&#160;&#x22C5; (k&#160;&#x2212; 1)&#160;&#x22C5; ... 2&#160;&#x22C5; 1</p>

<p>Как известно, это число называется <strong>факториалом</strong> <i>k</i> и обозначается &#171;k!&#187;; на самом деле определением факториала натурального числа <i>k</i> считается &#171;число перестановок из <i>k</i> элементов&#187;, а то, что факториал равен произведению чисел от 1 до <i>k</i>&#160;&#8212; это следствие.</p>

<p>Для сформулированной выше задачи ответ составит, таким образом, 7! = 5040 комбинаций.</p>

<p class="centered">
	<img src="images/combinator_three_balls.jpg" /><br/>
	<small>Рис. 1.8. Перестановки трёх шариков</small>
</p>
<br/><br/>

<p>К этому результату можно прийти и другим путём. Рассмотрим мешок, в котором лежат семь шаров, и семь пустых позиций на полке. Выбрать шар для заполнения первой пустой позиции мы можем семью способами; какой бы шар мы ни выбрали, в мешке их останется шесть. Иначе говоря, когда одна позиция уже заполнена, для заполнения второй позиции у нас имеется шесть вариантов, вне зависимости от того, каким из семи возможных способов была заполнена первая пустая позиция. Таким образом, на каждый из семи способов заполнения первой позиции у нас есть шесть способов заполнения второй позиции, а всего способов заполнения первых двух позиций получается 7&#160;&#x22C5; 6 = 42. В мешке при этом остаётся пять шаров, то есть на каждую из 42 комбинаций первых двух шаров есть пять вариантов выбора третьего шара; всего вариантов для первых трёх шаров получается 42&#160;&#x22C5; 5 = 210. Но на каждую такую комбинацию у нас есть четыре способа выбора очередного шара, ведь в мешке их осталось четыре; и так далее. Предпоследний шар из оставшихся в мешке мы сможем выбрать двумя способами, последний&#160;&#8212; одним. Получаем, что всего вариантов расстановки семи шаров у нас</p>

<p class="centered">
7&#160;&#x22C5; 6&#160;&#x22C5; 5&#160;&#x22C5; 4&#160;&#x22C5; 3&#160;&#x22C5; 2&#160;&#x22C5; 1 = 7! = 5040
</p>

<p>Повторив это же рассуждение для случая <i>k</i> шаров, мы придём к уже знакомому нам выражению</p>

<p class="centered">
<i>k</i>&#160;&#x22C5; (<i>k</i>&#160;&#x2212; 1)&#160;&#x22C5; (<i>k</i>&#160;&#x2212; 2)&#160;&#x22C5; ...&#160;&#x22C5; 3&#160;&#x22C5; 2&#160;&#x22C5; 1 = <i>k</i>!
</p>

<p>только в этот раз мы к нему пришли, двигаясь от бo&#769;льших чисел к меньшим, а не наоборот, как в предыдущем рассуждении. Отметим, что для понимания дальнейших выкладок нам будут полезны <i>оба</i> рассуждения.</p>

<p>Рассмотрим теперь промежуточную задачу, начав, как обычно, с частного случая:</p>

<p class="centered-italic">У Коли в мешке по-прежнему лежат семь шариков для американского бильярда с номерами от единички до семёрки. Вася показал Коле небольшую полочку, на которой могут поместиться только три шара. Сколькими разными способами Коля может заполнить эту полочку шарами?</p>

<p>Несомненно, читатель без труда найдёт ответ на этот вопрос, повторив три первых шага из приведённого выше рассуждения: первый из трёх шаров мы можем выбрать семью способами, второй&#160;&#8212; шестью, третий&#160;&#8212; пятью; ответ составит 7&#160;&#x22C5; 6&#160;&#x22C5; 5 = 210 вариантов. Это число можно записать, используя символ факториала:</p>

<p class="centered">
<m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
	<m:mrow>
		<m:mtext>7&#160;&#x22C5; 6&#160;&#x22C5; 5&#160;=&#160;</m:mtext>
		<m:mfrac>
	       	<m:mi>7&#160;&#x22C5; 6&#160;&#x22C5; 5&#160;&#x22C5; 4&#160;&#x22C5; 3&#160;&#x22C5; 2&#160;&#x22C5; 1</m:mi>
        	<m:mn>4&#160;&#x22C5; 3&#160;&#x22C5; 2&#160;&#x22C5; 1</m:mn>
	    </m:mfrac>
    	<m:mtext>&#160;=&#160;</m:mtext>
    	<m:mfrac>
    		<m:mi>7!</m:mi>
    		<m:mn>4!</m:mn>
    	</m:mfrac>
	</m:mrow>
</m:math>
</p>

<p>В общем случае, когда у нас есть <i>n</i> предметов (элементов множества) и нужно составить упорядоченный набор (кортеж) длиной <i>k</i>, имеем:</p>

<p class="centered">
<m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
	<m:mrow>
		<m:mtext>n&#160;&#x22C5; (n&#160;&#x2212; 1)&#160;&#x22C5; ...&#160;&#x22C5; (n&#160;&#x2212; k + 1)&#160;=</m:mtext>
	</m:mrow>
</m:math>
</p>
<p class="centered">
<m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
	<m:mrow>
		<m:mtext>=&#160;</m:mtext>
		<m:mfrac>
	       	<m:mi>n&#160;&#x22C5; (n&#160;&#x2212; 1)&#160;&#x22C5; ...&#160;&#x22C5; (n&#160;&#x2212; k + 1)&#160;&#x22C5; (n&#160;&#x2212; k)&#160;&#x22C5; ...&#160;&#x22C5; 2&#160;&#x22C5; 1</m:mi>
        	<m:mn>(n&#160;&#x2212; k)&#160;&#x22C5; ...&#160;&#x22C5; 2&#160;&#x22C5; 1</m:mn>
	    </m:mfrac>
    	<m:mtext>&#160;=</m:mtext>
    </m:mrow>
</m:math>
</p>
<p class="centered">
<m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
    <m:mrow>
    	<m:mtext>=&#160;</m:mtext>
    	<m:mfrac>
    		<m:mi>n!</m:mi>
    		<m:mn>(n&#160;&#x2212; k)!</m:mn>
    	</m:mfrac>
	</m:mrow>
</m:math>
</p>

<p>Эту величину, называемую <i>количеством размещений из n по k</i>, иногда в русскоязычной литературе обозначают
<m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
	<m:mrow>
		<m:msubsup>
			<m:mo>A</m:mo>
	       	<m:mi>k</m:mi>
        	<m:mn>n</m:mn>
	    </m:msubsup>
    </m:mrow>
</m:math> (читается <i>А из эн по ка</i>). В англоязычной литературе, а также и в некоторых русскоязычных источниках используется обозначение
<m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
	<m:mrow>
		<m:msub>
        	<m:mi>(n)</m:mi>
        	<m:mn>k</m:mn>
    	</m:msub>
	</m:mrow>
</m:math>, которое называют <i>убывающим факториалом</i>.</p>

<p>Сейчас, пожалуй, самое время решить задачу, которую мы сформулировали на стр. 109, но не стали решать. Напомним её условие:</p>

<p class="centered-italic">У Димы есть четыре разноцветных кубика. Ставя их один на другой, Дима строит башни, причём один кубик, на котором ничего не стоит, Дима тоже считает башней; иначе говоря, башня у Димы имеет высоту от 1 до 4 кубиков. Сколько различных башен можно построить из имеющихся кубиков?</p>

<p>Ясно, что башен из четырёх кубиков будет 4! = 24. Башен из трёх кубиков получится столько же: каждая из них получается из одной строго определённой башни высоты 4 снятием одного кубика, но то, что этот кубик Дима то ли держит в руках, то ли куда-то убрал, вместо того чтобы поставить его на вершину башни, никак не изменяет количества комбинаций. Наконец, башен из двух кубиков будет 4&#160;&#x22C5; 3 = 12, а башен из одного кубика&#160;&#8212; 4, по числу имеющихся кубиков. 24 + 24 + 12 + 4 = 64, это и есть ответ задачи.</p>

<p>Теперь мы подошли вплотную к очередной классической задаче, ради которой, в общем и целом, и был затеян весь разговор о перестановках. Как обычно, мы начнём с частного случая:</p>

<p class="centered-italic">У Коли в мешке лежат всё те же семь шариков для американского бильярда с номерами от единички до семёрки. Вася дал Коле пустой мешок и попросил переложить в него три любых шара. Сколькими разными способами Коля может выполнить просьбу Васи?</p>

<p>Эта задача отличается от предыдущей задачи про Колю и Васю тем, что шары в мешке, очевидно, перемешаются; иначе говоря, <i>нас больше не интересует порядок следования элементов в итоговых комбинациях</i>. Чтобы понять, как эта задача решается, представим себе, что Колю тоже заинтересовало, сколькими же способами он может выбрать три шара из имеющихся семи без учёта порядка, и он для начала выписал на листе бумаги все 210 вариантов, полученных при решении предыдущей задачи, где вместо мешка была полочка, то есть все возможные варианты размещений из семи по три <i>с учётом</i> порядка элементов. Зная, что варианты, различающиеся только порядком следования элементов, придётся теперь рассматривать как одинаковые, Коля решил для пробы посмотреть, сколько раз среди 210 выписанных комбинаций встречаются комбинации, состоящие из шаров с номерами 1, 2 и 3. Внимательно просмотрев свои записи, Коля обнаружил шесть таких комбинаций: 123, 132, 213, 231, 312 и 321. Решив проверить какой-нибудь другой набор шаров, Коля просмотрел свой список в поисках комбинаций, использующих шары с номерами 2, 3 и 6; таких комбинаций тоже нашлось шесть: 236, 263, 326, 362, 623 и 632 (эти комбинации уже знакомы нам по рис. 1.8 на стр. 113).</p>

<p>На этом месте своих изысканий Коля стал (будем надеяться, что вместе с нами) догадываться, что то же самое получится для любого набора шариков. В самом деле, ведь список из 210 комбинаций включает все возможные варианты выбора по три шара из семи с учётом их порядка; как следствие, какие бы мы ни взяли три шара из семи, в нашем списке найдутся, опять-таки, все комбинации, состоящие из этих трёх шаров, то есть, попросту, все перестановки выбранных трёх шаров; ну а перестановок из трёх элементов, как мы знаем, существует 3! = 3&#160;&#x22C5; 2&#160;&#x22C5; 1 = 6. Получается, что любая из интересующих нас комбинаций представлена в списке шесть раз; иначе говоря, список ровно вшестеро длиннее, чем нужный нам результат. Нам осталось лишь поделить 210 на 6, и мы получим ответ задачи:
<m:math xmlns:m="http://www.w3.org/1998/Math/MathML">
    <m:mrow>
    	<m:mtext>35&#160;=&#160;</m:mtext>
    	<m:mfrac>
    		<m:mi>210</m:mi>
    		<m:mn>6</m:mn>
    	</m:mfrac>
    	<m:mtext>&#160;=&#160;</m:mtext>
    	<m:mfrac>
   			<m:msub>
       			<m:mi>(7)</m:mi>
       			<m:mn>4</m:mn>
   			</m:msub>
    		<m:mn>3!</m:mn>
    	</m:mfrac>
    	<m:mtext>&#160;=&#160;</m:mtext>
    	<m:mfrac>
    		<m:mi>7!</m:mi>
    		<m:mn>3!4!</m:mn>
    	</m:mfrac>
	</m:mrow>
</m:math>.</p>

<p></p>






</section>
</body>
</html>